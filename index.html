<script type="module">
import { bg, show } from "https://js.sabae.cc/egadv.js";

await bg(3878);
await show("水害があらわれた");
let hp = 100;
await bg(2066);
let flg = false;
for (;;) {
    const a = await show("どうする？", ["たたかう", "まもる", "にげる"]);
    if (a == "たたかう") {
        if (Math.random() < .1) {
            await show("ミス、水害はノーダメージだ");
        } else {
            const n = Math.floor(Math.random() * 100);
            hp = hp - n;
            await show("水害に" + n + "のダメージを与えた");
            if (hp < 0) {
                await show("勝利！")
            }
        }
    }
    if (a == "まもる") {
        await show("水位が上昇してきた");
        flg = true;
    }
    if (a == "にげる") {
        const a = await show("どこににげる？", ["高台", "川", "家の2F"]);
        await show("高台に逃げた");
        break;
    }
}
if (flg) {
    await show("逃げ切れず死亡した！");
} else {
    await show("水害に勝利した！");
}
</script>
